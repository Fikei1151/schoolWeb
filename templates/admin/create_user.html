{% extends 'layout.html' %}
{% block title %}สร้างผู้ใช้ (Admin){% endblock %}
{% block content %}
<div class="max-w-lg mx-auto bg-white p-6 shadow rounded">
  <h2 class="text-2xl font-bold mb-4 text-pink-600">สร้างผู้ใช้ (เฉพาะ Admin)</h2>
  <form method="POST">
    <!-- Citizen ID -->
    <div class="mb-4">
      <label class="block mb-1 font-semibold text-gray-700">รหัสประจำตัว (13 หลัก)</label>
      <input type="text" name="citizen_id" maxlength="13" pattern="\d{13}" 
             title="กรุณากรอกเลข 13 หลัก" class="border w-full p-2 rounded" required>
    </div>

    <!-- Password -->
    <div class="mb-4">
      <label class="block mb-1 font-semibold text-gray-700">รหัสผ่าน</label>
      <input type="password" name="password" class="border w-full p-2 rounded" required>
    </div>

    <!-- First Name -->
    <div class="mb-4">
      <label class="block mb-1 font-semibold text-gray-700">ชื่อ</label>
      <input type="text" name="first_name" class="border w-full p-2 rounded" required>
    </div>

    <!-- Last Name -->
    <div class="mb-4">
      <label class="block mb-1 font-semibold text-gray-700">นามสกุล</label>
      <input type="text" name="last_name" class="border w-full p-2 rounded" required>
    </div>

    <!-- Gender -->
    <div class="mb-4">
      <label class="block mb-1 font-semibold text-gray-700">เพศ</label>
      <select name="gender" class="border w-full p-2 rounded">
        <option value="male">ชาย</option>
        <option value="female">หญิง</option>
      </select>
    </div>

    <!-- Role -->
    <div class="mb-4">
      <label class="block mb-1 font-semibold text-gray-700">บทบาท (Role)</label>
      <select name="role" id="role-select" class="border w-full p-2 rounded" onchange="toggleEducationLevel()">
        <option value="admin">Admin</option>
        <option value="teacher">Teacher</option>
        <option value="student">Student</option>
      </select>
    </div>

    <!-- Education Level (แสดงเมื่อเลือก Student) -->
    <div class="mb-4 hidden" id="education-level-field">
      <label class="block mb-1 font-semibold text-gray-700">ระดับการศึกษา</label>
      <select name="education_level" class="border w-full p-2 rounded">
        <option value="primary">ประถมศึกษา (Primary)</option>
        <option value="secondary">มัธยมศึกษา (Secondary)</option>
      </select>
    </div>

    <!-- Submit Button -->
    <button type="submit" 
            class="bg-pink-600 hover:bg-pink-700 text-white px-4 py-2 rounded">
      สร้างผู้ใช้
    </button>
  </form>
</div>

<!-- JavaScript -->
<script>
  function toggleEducationLevel() {
    const roleSelect = document.getElementById('role-select');
    const educationLevelField = document.getElementById('education-level-field');

    if (roleSelect.value === 'student') {
      educationLevelField.classList.remove('hidden');
    } else {
      educationLevelField.classList.add('hidden');
    }
  }
</script>
{% endblock %}
